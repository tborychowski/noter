<div class="list notes">
	<div class="scroller">
		{#each $notesInFolder as item}
		<div
			class="list-item note {isSelected(item, $note) ? 'selected' : ''}"
			draggable="true"
			tabindex="0"
			on:focus="open(null, item)"
			on:dragstart="ondragstart(event, item)"
			on:click="open(event, item)">
				{item.title}
				<span class="list-item-badge  pill">{item.folder}</span>
		</div>
		{/each}
	</div>
</div>


<script>
import {Data, Store} from '../data';

export default {
	store: () => Store,
	helpers: {
		isSelected (item, selected) {
			if (!selected || !item) return false;
			return selected.id === item.id;
		}
	},
	methods: {
		ondragstart (ev, item) {
			ev.dataTransfer.setData('itemId', item.id);
		},

		open (ev, note) {
			if (ev) ev.preventDefault();
			if (this.store.get().mode === 'view') this.store.set({ note });
			else document.querySelector('.note-title-input').select();
		}
	}
};
</script>
