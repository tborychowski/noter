<div class="notes">
	<!-- <h2>
		<span>{$folder && $folder.name || ''}</span>
		<div class="flex-filler"></div>
	</h2> -->
	<div class="scroller">
		{#each notes as item}
		<a href="#"
			class="note {isSelected(item, $note) ? 'selected' : ''}"
			on:click="select(event, item)">{item.title}</a>
		{/each}
	</div>
</div>


<script>
import {Data, Store} from '../data';


export default {
	data () {
		return {};
	},
	store: () => Store,
	oncreate () {},
	computed: {
		notes ({$notes, $folder}) {
			let notes = $notes;
			if ($folder !== null) notes = notes.filter(n => n.folder === $folder);
			return notes.sort((a, b) => a.title.localeCompare(b.title));
		}
	},
	helpers: {
		isSelected (item, selected) {
			if (!selected || !item) return false;
			return selected.id === item.id;
		}
	},

	methods: {
		select (ev, item) {
			ev.preventDefault();
			this.set({ selected: item });
			this.store.set({ note: item });
		},

	}
};
</script>
